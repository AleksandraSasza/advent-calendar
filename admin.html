<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Administracyjny - Kalendarz Adwentowy</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quintessential&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="admin-styles.css">
</head>
<body class="admin-body">
    <!-- Kontener dla p≈Çatk√≥w ≈õniegu -->
    <div class="snow-container" aria-hidden="true">
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
    </div>
    <div class="admin-container">
        <header class="admin-header">
            <h1>üîß Panel Administracyjny</h1>
            <p>ZarzƒÖdzaj u≈ºytkownikami i zadaniami</p>
            <a href="index.html" class="back-link">‚Üê Wr√≥ƒá do kalendarza</a>
        </header>
        
        <!-- Menu nawigacyjne -->
        <nav class="admin-nav" id="admin-nav">
            <div class="admin-nav-item active" data-section="verification">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M21 12c-1 0-3-1-3-3s2-3 3-3 3 1 3 3-2 3-3 3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M3 12c1 0 3-1 3-3s-2-3-3-3-3 1-3 3 2 3 3 3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M12 21c0-1-1-3-3-3s-3 2-3 3 1 3 3 3 3-2 3-3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M12 3c0 1 1 3 3 3s3-2 3-3-1-3-3-3-3 2-3 3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Zadania do akceptacji</span>
            </div>
            <div class="admin-nav-item" data-section="users">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>U≈ºytkownicy</span>
            </div>
            <div class="admin-nav-item" data-section="tasks">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 11l3 3L22 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Zadania</span>
            </div>
            <div class="admin-nav-item" data-section="templates">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M14 2v6h6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M16 13H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M16 17H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M10 9H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Szablony</span>
            </div>
            <div class="admin-nav-item" data-section="calendar">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M16 2v4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M8 2v4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M3 10h18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Dni kalendarza</span>
            </div>
        </nav>
        
        <div class="admin-content">
            <!-- Sekcja zada≈Ñ do akceptacji -->
            <div class="admin-section" id="section-verification" data-section="verification">
                <h2>‚úÖ Zadania do akceptacji</h2>
                <p style="color: #6e6e73; margin-bottom: 20px; font-size: 0.875rem;">
                    Zadania ze zdjƒôciami wymagajƒÖ weryfikacji przed oznaczeniem jako wykonane.
                </p>
                <div id="verification-tasks-list" class="verification-tasks-list">
                    <p>≈Åadowanie zada≈Ñ...</p>
                </div>
            </div>
            
            <!-- Sekcja u≈ºytkownik√≥w -->
            <div class="admin-section" id="section-users" data-section="users" style="display: none;">
                <h2>üë• U≈ºytkownicy</h2>
                <button id="add-user-btn" class="btn btn-primary" style="margin-bottom: 20px;">+ Dodaj u≈ºytkownika</button>
                <div id="users-list" class="users-list">
                    <p>≈Åadowanie u≈ºytkownik√≥w...</p>
                </div>
            </div>
            
            <!-- Modal dodawania u≈ºytkownika -->
            <div id="add-user-modal" class="modal" style="display: none;">
                <div class="modal-content" style="max-width: 500px;">
                    <div class="modal-header">
                        <span class="close" id="close-user-modal">&times;</span>
                        <h2>Dodaj u≈ºytkownika</h2>
                    </div>
                    <div class="modal-body">
                        <form id="add-user-form">
                            <div class="form-group">
                                <label for="user-email">Email u≈ºytkownika:</label>
                                <input type="email" id="user-email" placeholder="np. uzytkownik@example.com" required>
                                <small style="color: #6e6e73; display: block; margin-top: 4px;">
                                    U≈ºytkownik otrzyma has≈Ço: <strong>Adwent2025</strong>
                                </small>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Dodaj u≈ºytkownika</button>
                                <button type="button" class="btn btn-secondary" id="cancel-user-btn">Anuluj</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- Sekcja zarzƒÖdzania szablonami zada≈Ñ -->
            <div class="admin-section" id="section-templates" data-section="templates" style="display: none;">
                <h2>üìã Szablony zada≈Ñ</h2>
                <button id="add-template-btn" class="btn btn-primary" style="margin-bottom: 20px;">+ Dodaj szablon</button>
                <div id="templates-list" class="templates-list">
                    <p>≈Åadowanie szablon√≥w...</p>
                </div>
            </div>
            
            <!-- Modal dodawania dnia -->
            <div id="add-day-modal" class="modal" style="display: none;">
                <div class="modal-content" style="max-width: 500px;">
                    <div class="modal-header">
                        <span class="close" id="close-day-modal">&times;</span>
                        <h2>Dodaj dzie≈Ñ kalendarza</h2>
                    </div>
                    <div class="modal-body">
                        <form id="add-day-form">
                            <div class="form-group">
                                <label for="day-number">Numer dnia (1-24):</label>
                                <input type="number" id="day-number" min="1" max="24" required>
                                <small style="color: #6e6e73; display: block; margin-top: 4px;">
                                    Pa≈Ñstwo, wsp√≥≈Çrzƒôdne i ciekawostka sƒÖ zdefiniowane w kodzie aplikacji.
                                </small>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Dodaj dzie≈Ñ</button>
                                <button type="button" class="btn btn-secondary" id="cancel-day-btn">Anuluj</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- Modal dodawania/edycji szablonu -->
            <div id="add-template-modal" class="modal" style="display: none;">
                <div class="modal-content" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
                    <div class="modal-header">
                        <span class="close" id="close-template-modal">&times;</span>
                        <h2 id="template-modal-title">Dodaj szablon zadania</h2>
                    </div>
                    <div class="modal-body">
                        <form id="add-template-form">
                            <input type="hidden" id="template-id" value="">
                            
                            <div class="form-group">
                                <label for="template-day">Dzie≈Ñ kalendarza:</label>
                                <select id="template-day" required>
                                    <option value="">Wybierz dzie≈Ñ...</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="template-title">Tytu≈Ç zadania:</label>
                                <input type="text" id="template-title" required placeholder="Np. Quiz o ≈õwiƒôtach">
                            </div>
                            
                            <div class="form-group">
                                <label for="template-description">Opis zadania:</label>
                                <textarea id="template-description" placeholder="Szczeg√≥≈Çowy opis zadania..." rows="3"></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="template-type">Typ zadania:</label>
                                <select id="template-type" required>
                                    <option value="text_response">Odpowied≈∫ tekstowa</option>
                                    <option value="quiz">Quiz</option>
                                    <option value="photo_upload">Dodaj zdjƒôcie</option>
                                    <option value="checkbox">Checkbox</option>
                                    <option value="link">Link</option>
                                    <option value="custom">Niestandardowe</option>
                                </select>
                            </div>
                            
                            <!-- Sekcja quizu (widoczna tylko dla typu quiz) -->
                            <div id="quiz-section" style="display: none; margin-top: 32px; padding-top: 24px; border-top: 1px solid #e8e8ed;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                                    <div>
                                        <h3 style="margin: 0 0 4px 0; font-size: 1.125rem; font-weight: 600; color: #1d1d1f; letter-spacing: -0.2px;">Pytania quizowe</h3>
                                        <p style="margin: 0; font-size: 0.8125rem; color: #6e6e73;">Dodaj pytania z wielokrotnym wyborem odpowiedzi</p>
                                    </div>
                                    <button type="button" id="add-question-btn" class="btn btn-primary" style="padding: 10px 20px; font-size: 0.875rem; min-height: 44px;">
                                        + Dodaj pytanie
                                    </button>
                                </div>
                                <div id="quiz-questions-container">
                                    <!-- Pytania bƒôdƒÖ dodawane dynamicznie -->
                                </div>
                            </div>
                            
                            <div class="form-actions" style="margin-top: 24px;">
                                <button type="submit" class="btn btn-primary" id="template-submit-btn">Dodaj szablon</button>
                                <button type="button" class="btn btn-secondary" id="cancel-template-btn">Anuluj</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- Sekcja zarzƒÖdzania zadaniami - TABELA -->
            <div class="admin-section" id="section-tasks" data-section="tasks" style="display: none;">
                <h2>üìã ZarzƒÖdzanie zadaniami</h2>
                <div style="margin-bottom: 20px;">
                    <button id="assign-bulk-btn" class="btn btn-primary">+ Przypisz zadanie wszystkim</button>
                </div>
                <div id="tasks-table-container" style="overflow-x: auto;">
                    <table id="tasks-table" class="admin-table">
                        <thead>
                            <tr id="tasks-table-header">
                                <th style="position: sticky; left: 0; background: #f5f5f7; z-index: 10; min-width: 50px; max-width: 50px; width: 50px;">Dzie≈Ñ</th>
                                <!-- Kolumny u≈ºytkownik√≥w bƒôdƒÖ dodane dynamicznie -->
                            </tr>
                        </thead>
                        <tbody id="tasks-table-body">
                            <tr>
                                <td colspan="100" style="text-align: center; padding: 20px; color: #6e6e73;">
                                    ≈Åadowanie danych...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Modal przypisywania zadania -->
            <div id="assign-task-modal" class="modal" style="display: none;">
                <div class="modal-content" style="max-width: 500px;">
                    <div class="modal-header">
                        <span class="close" id="close-assign-modal">&times;</span>
                        <h2>Przypisz zadanie</h2>
                    </div>
                    <div class="modal-body">
                        <form id="assign-task-form">
                            <div id="assign-day-select-group" class="form-group">
                                <label for="assign-day-modal">Dzie≈Ñ (1-24):</label>
                                <input type="number" id="assign-day-modal" min="1" max="24" required>
                            </div>
                            <div class="form-group">
                                <label for="assign-task-select-modal">Zadanie:</label>
                                <select id="assign-task-select-modal" required>
                                    <option value="">Wybierz zadanie...</option>
                                </select>
                            </div>
                            <div id="assign-to-all-group" class="form-group" style="display: flex; align-items: center; gap: 8px; margin: 16px 0;">
                                <input type="checkbox" id="assign-to-all" checked style="width: 18px; height: 18px; cursor: pointer; margin: 0;">
                                <label for="assign-to-all" style="margin: 0; cursor: pointer; font-size: 0.9375rem;">Przypisz do wszystkich u≈ºytkownik√≥w</label>
                            </div>
                            <div id="assign-user-select-group" style="display: none;">
                                <label for="assign-user-modal">U≈ºytkownik:</label>
                                <select id="assign-user-modal">
                                    <option value="">Wybierz u≈ºytkownika...</option>
                                </select>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Przypisz</button>
                                <button type="button" class="btn btn-secondary" id="cancel-assign-btn">Anuluj</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- Sekcja zarzƒÖdzania dniami kalendarza - NA KO≈ÉCU -->
            <div class="admin-section" id="section-calendar" data-section="calendar" style="display: none;">
                <h2>üìÖ Dni kalendarza</h2>
                <p style="color: #6e6e73; margin-bottom: 20px; font-size: 0.875rem;">
                    Edytuj pa≈Ñstwo i ciekawostkƒô dla ka≈ºdego dnia.
                </p>
                <div id="calendar-days-list" class="calendar-days-list">
                    <p>≈Åadowanie dni...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Konfiguracja Supabase (PRZED Supabase Client) -->
    <script src="config.js"></script>
    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        // Eksportuj supabase jako supabaseLib dla admin-script.js
        window.supabaseLib = supabase;
    </script>
    <script src="admin-script.js"></script>
</body>
</html>

